<%# app/view/system/admin/users_groups/_form.html %>
<%
users = System::User.find(:all,:order=>"ldap ASC , id ASC").collect {|u| [u.name + '('+ u.code.to_s + ')' , u.id]}
#groups = System::Group.find(:all,:conditions=>"parent_id=#{@parent.parent_id}").collect {|g| [g.name + '('+ g.code.to_s + ')' , g.id]}
groups = System::Group.select_dd_tree
%>
<%= required_head %>
<table class="show">
<tr>
<% if @action=='edit' %>
<th>ユーザー</th><td><%= @item.user.name %><%= f.hidden_field :user_id ,:value=>@item.user_id %></td>
<% else %>
<th>ユーザー<%= required %></th><td><%= f.select(:user_id , options_for_select(users,@item.user_id) , :include_blank => true) %></td>
<% end %>
</tr>
<tr>
<th>所属<%= required %></th><td><%= f.select(:group_id , options_for_select(groups,@parent.id) , :include_blank => true) %></td>
</tr>
<tr>
<th>本務・兼務<%= required %></th><td><%= radio f , :job_order , System::UsersGroup.select_state , :class => 'state'  %></td>
</tr>
<tr>
<th>配属開始日<%= required %></th>
<td><%= f.text_field :start_at ,:value => Gw.date_str(@item.start_at)  %>
<button type="button" id="start_at_bt" onclick="showCalendar('start_at_bt','<%= "#{f.object_name}_start_at" %>')" class="show_cal_bt"></button>
</td>
</tr>
<tr>
<th>配属終了日</th>
<td><%= f.text_field :end_at ,:value => Gw.date_str(@item.end_at)  %>
<button type="button" id="end_at_bt" onclick="showCalendar('end_at_bt','<%= "#{f.object_name}_end_at" %>')" class="show_cal_bt"></button>
</td>
</tr>
</table>
<%= gw_js_include_full %>
